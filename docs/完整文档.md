# XRK-AGT å®Œæ•´æ–‡æ¡£

> æœ¬æ–‡æ¡£æ•´åˆäº†æ¡†æ¶çš„æ‰€æœ‰æ ¸å¿ƒæ–‡æ¡£ï¼Œæä¾›å®Œæ•´çš„å¼€å‘æŒ‡å—å’ŒAPIå‚è€ƒã€‚  
> **æ¡†æ¶å¯æ‰©å±•æ€§**ï¼šXRK-AGTé‡‡ç”¨åˆ†å±‚æ¶æ„+åŸºç±»è®¾è®¡+åŠ è½½å™¨æœºåˆ¶ï¼Œå®ç°äº†æé«˜çš„å¯æ‰©å±•æ€§ã€‚è¯¦è§ **[æ¡†æ¶å¯æ‰©å±•æ€§æŒ‡å—](æ¡†æ¶å¯æ‰©å±•æ€§æŒ‡å—.md)** â­ æ¨è

## ğŸ“‘ ç›®å½•å¯¼èˆª

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¶æ„æ€»è§ˆ](#æ¶æ„æ€»è§ˆ)
- [æ¶æ„å±‚æ¬¡è¯´æ˜](#æ¶æ„å±‚æ¬¡è¯´æ˜)
- [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
- [æ¡†æ¶å¯æ‰©å±•æ€§](#æ¡†æ¶å¯æ‰©å±•æ€§) â­ æ–°å¢
- [ServeræœåŠ¡å™¨æ¶æ„](server.md) â­ æ–°å¢
  - [Botä¸»ç±»](#botä¸»ç±»)
  - [åŸºç¡€è®¾æ–½å±‚](#åŸºç¡€è®¾æ–½å±‚è¾…åŠ©å±‚)
  - [ä»»åŠ¡å±‚ï¼ˆTaskerï¼‰](#ä»»åŠ¡å±‚tasker)
  - [äº‹ä»¶ç³»ç»Ÿ](#äº‹ä»¶ç³»ç»Ÿ)
  - [æ’ä»¶ç³»ç»Ÿ](#æ’ä»¶ç³»ç»Ÿ)
  - [HTTP/APIå±‚](#httpapiå±‚)
  - [AIå·¥ä½œæµ](#aiå·¥ä½œæµ)
  - [é…ç½®ç³»ç»Ÿ](#é…ç½®ç³»ç»Ÿ)
  - [æ¸²æŸ“ç³»ç»Ÿ](#æ¸²æŸ“ç³»ç»Ÿ)
  - [å·¥å…·ç±»](#å·¥å…·ç±»)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [APIå‚è€ƒ](#apiå‚è€ƒ)

---

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¸è¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®ï¼ˆGitHubï¼‰
git clone --depth=1 https://github.com/sunflowermm/XRK-AGT.git
# æˆ–ä½¿ç”¨ GitCodeï¼ˆå›½å†…é•œåƒï¼‰
git clone --depth=1 https://gitcode.com/Xrkseek/XRK-AGT.git
cd XRK-AGT

# å®‰è£…ä¾èµ–ï¼ˆä»…æ”¯æŒ pnpmï¼‰
pnpm install

# è¿è¡Œ
node app
```

### é¡¹ç›®ç»“æ„

```mermaid
graph TD
    Root[XRK-AGT/] --> App[app.js / start.js<br/>å¯åŠ¨å…¥å£]
    Root --> Src[src/<br/>è¿è¡Œæ ¸å¿ƒä¸åŸºç¡€è®¾æ–½]
    Root --> Core[core/<br/>ä¸šåŠ¡å±‚ä¸ä»»åŠ¡å±‚]
    Root --> Config[config/<br/>é…ç½®æ–‡ä»¶]
    Root --> Docs[docs/<br/>æ–‡æ¡£]
    Root --> Www[www/<br/>Webå‰ç«¯]
    
    Src --> Bot[bot.js<br/>Botä¸»ç±»]
    Src --> Infra[infrastructure/<br/>åŸºç¡€è®¾æ–½å±‚]
    Src --> Utils[utils/<br/>å·¥å…·å‡½æ•°]
    
    Infra --> TaskerLoader[tasker/loader.js<br/>TaskerLoader]
    Infra --> PluginsInfra[plugins/<br/>æ’ä»¶ç³»ç»ŸåŸºç¡€è®¾æ–½]
    Infra --> ListenerInfra[listener/<br/>äº‹ä»¶ç›‘å¬å™¨åŸºç¡€è®¾æ–½]
    Infra --> HttpInfra[http/<br/>HTTP APIåŸºç¡€è®¾æ–½]
    Infra --> AistreamInfra[aistream/<br/>AIå·¥ä½œæµåŸºç¡€è®¾æ–½]
    Infra --> RendererInfra[renderer/<br/>æ¸²æŸ“å™¨åŸºç¡€è®¾æ–½]
    
    Core --> TaskerCore[tasker/<br/>ä»»åŠ¡å±‚]
    Core --> Events[events/<br/>äº‹ä»¶ç³»ç»Ÿ]
    Core --> PluginCore[plugin/<br/>ä¸šåŠ¡æ’ä»¶]
    Core --> HttpCore[http/<br/>HTTP API]
    Core --> StreamCore[stream/<br/>AIå·¥ä½œæµ]
    
    style Root fill:#FFD700
    style Bot fill:#87CEEB
    style Infra fill:#90EE90
    style Core fill:#FFB6C1
```

---

## æ¶æ„æ€»è§ˆ

### æ ¸å¿ƒç»„ä»¶å…³ç³»

```mermaid
flowchart LR
    subgraph Clients["å¤–éƒ¨å®¢æˆ·ç«¯"]
      QQ["QQ / OneBotv11"] -->|WS| Taskers
      WeChat["ComWeChat ç­‰"] -->|WS/HTTP| Taskers
      WebUI["XRK Web æ§åˆ¶å°"] -->|HTTP/WS| Express
      ThirdAPI["ç¬¬ä¸‰æ–¹è°ƒç”¨æ–¹"] -->|HTTP/WS| Express
    end

    subgraph Core["XRK-AGT æ ¸å¿ƒ"]
      Taskers["ä»»åŠ¡å±‚<br/>core/tasker"] -->|Bot.em äº‹ä»¶| EventSystem
      EventSystem["äº‹ä»¶ç³»ç»Ÿ<br/>core/events"] -->|å»é‡/æ ‡è®°| PluginsLoader
      Express["HTTP/HTTPS/WS æœåŠ¡<br/>src/bot.js"] --> ApiLoader
      ApiLoader["API åŠ è½½å™¨<br/>src/infrastructure/http"] --> HttpApis
      PluginsLoader["æ’ä»¶åŠ è½½å™¨<br/>src/infrastructure/plugins"] --> Plugins["ä¸šåŠ¡æ’ä»¶<br/>core/plugin"]
      Plugins --> AIStream["AI å·¥ä½œæµåŸºç±»<br/>src/infrastructure/aistream"]
      Plugins --> Renderer["æ¸²æŸ“å™¨åŸºç±»<br/>src/infrastructure/renderer"]
      HttpApis["HTTP API<br/>core/http"] --> AIStream
      HttpApis --> Renderer
    end
```

### è¿è¡Œæµç¨‹

```mermaid
flowchart TB
    subgraph Start["å¯åŠ¨é˜¶æ®µ"]
        A[app.js<br/>ç¯å¢ƒæ£€æŸ¥] --> B[å®‰è£…ä¾èµ–]
        B --> C[start.js<br/>åˆ›å»ºBotå®ä¾‹]
        C --> D[åŠ è½½é…ç½®]
        D --> E[åŠ è½½Tasker]
        E --> F[åŠ è½½äº‹ä»¶ç›‘å¬å™¨]
        F --> G[åŠ è½½æ’ä»¶]
        G --> H[åŠ è½½API]
        H --> I[å¯åŠ¨HTTP/WSæœåŠ¡]
    end
    
    subgraph Runtime["è¿è¡Œé˜¶æ®µ"]
        J[Taskeræ¥æ”¶æ¶ˆæ¯] --> K[Bot.emè§¦å‘äº‹ä»¶]
        K --> L[äº‹ä»¶ç›‘å¬å™¨å¤„ç†]
        L --> M[å»é‡/æ ‡å‡†åŒ–]
        M --> N[æ’ä»¶ç³»ç»ŸåŒ¹é…è§„åˆ™]
        N --> O[æ‰§è¡Œæ’ä»¶]
        O --> P[è°ƒç”¨AIå·¥ä½œæµ/æ¸²æŸ“å™¨]
    end
    
    subgraph HTTP["HTTPæœåŠ¡"]
        Q[Expressæ¥æ”¶è¯·æ±‚] --> R[APIè·¯ç”±å¤„ç†]
        R --> S[ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ]
        S --> T[è¿”å›å“åº”/WebSocketæ¶ˆæ¯]
    end
    
    Start --> Runtime
    Start --> HTTP
    
    style A fill:#E6F3FF
    style K fill:#FFE6CC
    style Q fill:#E6FFE6
```

---

## æ¶æ„å±‚æ¬¡è¯´æ˜

XRK-AGT é‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œå„å±‚èŒè´£æ˜ç¡®ï¼š

### ğŸ—ï¸ æ¶æ„å±‚æ¬¡å›¾

```mermaid
flowchart TB
    subgraph Runtime["è¿è¡Œæ ¸å¿ƒå±‚"]
      Bot["Bot ä¸»ç±»<br/>src/bot.js<br/>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç»„ä»¶"]
    end

    subgraph Infrastructure["åŸºç¡€è®¾æ–½å±‚ï¼ˆè¾…åŠ©å±‚ï¼‰<br/>src/infrastructure/"]
      Loaders["åŠ è½½å™¨<br/>TaskerLoader/PluginsLoader<br/>ApiLoader/StreamLoader<br/>ListenerLoader"]
      BaseClasses["åŸºç±»åº“<br/>plugin/HttpApi/AIStream<br/>Renderer/ConfigBase/EventListener"]
      DB["æ•°æ®åº“å®¢æˆ·ç«¯<br/>redis/mongodb"]
    end

    subgraph Tasker["ä»»åŠ¡å±‚ï¼ˆTaskerï¼‰<br/>core/tasker/"]
      Taskers["å„å¹³å° Tasker<br/>OneBotv11/ComWeChat<br/>stdin/è‡ªå®šä¹‰"]
    end

    subgraph EventSystem["äº‹ä»¶ç³»ç»Ÿ<br/>core/events/"]
      Listeners["äº‹ä»¶ç›‘å¬å™¨<br/>onebot/device/stdin"]
    end

    subgraph Business["ä¸šåŠ¡å±‚<br/>core/"]
      Plugins["ä¸šåŠ¡æ’ä»¶<br/>core/plugin/"]
      HttpApis["HTTP API<br/>core/http/"]
      Streams["å·¥ä½œæµ<br/>core/stream/"]
    end

    Bot --> Infrastructure
    Infrastructure --> Tasker
    Infrastructure --> EventSystem
    Infrastructure --> Business
    Tasker -->|Bot.em è§¦å‘| EventSystem
    EventSystem -->|å»é‡/æ ‡è®°| Business
```

### ğŸ“‹ å„å±‚èŒè´£

#### 1. è¿è¡Œæ ¸å¿ƒå±‚ (`src/bot.js`)
- **èŒè´£**ï¼šç»Ÿä¸€ç®¡ç† HTTP/HTTPS/WebSocket æœåŠ¡ã€ä¸­é—´ä»¶ã€è®¤è¯ã€åå‘ä»£ç†ã€äº‹ä»¶æ€»çº¿ (`Bot.em`)
- **ç‰¹ç‚¹**ï¼šç³»ç»Ÿå…¥å£ï¼Œåè°ƒæ‰€æœ‰ç»„ä»¶

#### 2. åŸºç¡€è®¾æ–½å±‚ï¼ˆè¾…åŠ©å±‚ï¼‰(`src/infrastructure/`)
- **èŒè´£**ï¼šæä¾›æ‰€æœ‰åŸºç¡€è®¾æ–½å’ŒåŸºç±»ï¼Œä¸ºä¸šåŠ¡å±‚æä¾›é€šç”¨èƒ½åŠ›
- **åŒ…å«**ï¼š
  - **åŠ è½½å™¨**ï¼š`TaskerLoader`ã€`PluginsLoader`ã€`ApiLoader`ã€`StreamLoader`ã€`ListenerLoader`
  - **åŸºç±»åº“**ï¼š`plugin`ã€`HttpApi`ã€`AIStream`ã€`Renderer`ã€`ConfigBase`ã€`EventListener`
  - **æ•°æ®åº“å®¢æˆ·ç«¯**ï¼š`redis.js`ã€`mongodb.js`
- **ç‰¹ç‚¹**ï¼šä¸åŒ…å«å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼Œåªæä¾›æŠ½è±¡å’Œå·¥å…·

#### 3. ä»»åŠ¡å±‚ï¼ˆTaskerï¼‰(`core/tasker/`)
- **èŒè´£**ï¼šå¯¹æ¥å„å¹³å°åè®®ï¼ˆQQ/å¾®ä¿¡/è‡ªå®šä¹‰ï¼‰ï¼Œå°†å¹³å°æ¶ˆæ¯è½¬æ¢ä¸ºç»Ÿä¸€äº‹ä»¶æ¨¡å‹ï¼Œé€šè¿‡ `Bot.em` è§¦å‘äº‹ä»¶
- **ç‰¹ç‚¹**ï¼šäº‹ä»¶ç”Ÿæˆå™¨ï¼Œè´Ÿè´£åè®®è½¬æ¢

#### 4. äº‹ä»¶ç³»ç»Ÿ (`core/events/`)
- **èŒè´£**ï¼šç›‘å¬ `Bot.em` äº‹ä»¶ï¼Œè¿›è¡Œå»é‡ã€æ ‡è®°ã€é¢„å¤„ç†ï¼Œç„¶åè°ƒç”¨ `PluginsLoader.deal(e)` åˆ†å‘åˆ°æ’ä»¶
- **ç‰¹ç‚¹**ï¼šäº‹ä»¶æ ‡å‡†åŒ–å’Œé¢„å¤„ç†å±‚

#### 5. ä¸šåŠ¡å±‚ (`core/`)
- **èŒè´£**ï¼šå®ç°å…·ä½“ä¸šåŠ¡é€»è¾‘
- **åŒ…å«**ï¼š
  - **ä¸šåŠ¡æ’ä»¶** (`core/plugin/`)ï¼šåŒ…æ‹¬ `enhancer/`ï¼ˆå¢å¼ºæ’ä»¶ï¼‰å’Œ `example/`ï¼ˆç¤ºä¾‹æ’ä»¶ï¼‰
  - **HTTP API** (`core/http/`)ï¼šå…·ä½“çš„ REST/WebSocket API å®ç°
  - **å·¥ä½œæµ** (`core/stream/`)ï¼šåŸºäº `AIStream` çš„ä¸šåŠ¡å·¥ä½œæµå®ç°
- **ç‰¹ç‚¹**ï¼šåŸºäºåŸºç¡€è®¾æ–½å±‚çš„åŸºç±»å®ç°å…·ä½“åŠŸèƒ½

---

## æ ¸å¿ƒæ¨¡å—

### Botä¸»ç±»

**æ–‡ä»¶**: `src/bot.js`

**èŒè´£**:
- HTTP/HTTPS/WebSocketæœåŠ¡ç®¡ç†
- ä¸­é—´ä»¶é…ç½®ï¼ˆCORSã€è®¤è¯ã€é™æµç­‰ï¼‰
- åå‘ä»£ç†æ”¯æŒ
- äº‹ä»¶æ´¾å‘ï¼ˆ`Bot.em`ï¼‰
- èµ„æºæ¸…ç†

**å…³é”®æ–¹æ³•**:
- `prepareEvent(data)`: è®¾ç½®äº‹ä»¶é€šç”¨å±æ€§
- `em(name, data)`: è§¦å‘äº‹ä»¶
- `run(options)`: å¯åŠ¨æœåŠ¡

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[Botä¸»ç±»è¯¦ç»†è¯´æ˜](#botä¸»ç±»è¯¦ç»†è¯´æ˜)

---

### æ’ä»¶ç³»ç»Ÿ

#### æ’ä»¶åŸºç±» (`plugin`)

**æ–‡ä»¶**: `src/infrastructure/plugins/plugin.js`

**æ ¸å¿ƒæ¦‚å¿µ**:
- `name`: æ’ä»¶åç§°
- `event`: ç›‘å¬çš„äº‹ä»¶ç±»å‹
- `priority`: ä¼˜å…ˆçº§ï¼ˆè¶Šå°è¶Šå…ˆæ‰§è¡Œï¼‰
- `rule`: è§„åˆ™æ•°ç»„
- `task`: å®šæ—¶ä»»åŠ¡

**acceptæ–¹æ³•**:
```javascript
async accept(e) {
  // å‰ç½®æ£€æŸ¥ï¼Œè¿”å›true/false/'return'
  // Taskerå¢å¼ºæ’ä»¶åœ¨æ­¤æŒ‚è½½ç‰¹å®šå±æ€§
  return true
}
```

**ä¸Šä¸‹æ–‡ç®¡ç†**:
- `setContext(type, isGroup, time)`: è®¾ç½®ä¸Šä¸‹æ–‡
- `getContext(type, isGroup)`: è·å–ä¸Šä¸‹æ–‡
- `finish(type, isGroup)`: ç»“æŸä¸Šä¸‹æ–‡

#### æ’ä»¶åŠ è½½å™¨ (`PluginsLoader`)

**æ–‡ä»¶**: `src/infrastructure/plugins/loader.js`

**èŒè´£**:
- æ‰«æå¹¶åŠ è½½`core/plugin`ç›®å½•
- è§„åˆ™åŒ¹é…ä¸æƒé™æ£€æŸ¥
- å†·å´ä¸èŠ‚æµç®¡ç†
- å®šæ—¶ä»»åŠ¡è°ƒåº¦

**äº‹ä»¶å¤„ç†æµç¨‹**:

```mermaid
sequenceDiagram
    participant Event as äº‹ä»¶å¯¹è±¡
    participant Loader as PluginsLoader
    participant Plugin as æ’ä»¶å®ä¾‹
    
    Event->>Loader: deal(e)
    Loader->>Loader: initEvent(e)
    Loader->>Loader: preCheck(e)
    Loader->>Loader: initPlugins(e)
    loop éå†æ‰€æœ‰æ’ä»¶
        Loader->>Plugin: accept(e)
        Plugin-->>Loader: true/false/'return'
        alt acceptè¿”å›true
            Loader->>Plugin: æ‰§è¡Œruleè§„åˆ™
            Plugin-->>Loader: æ‰§è¡Œç»“æœ
        end
    end
    Loader-->>Event: å¤„ç†å®Œæˆ
```

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[æ’ä»¶ç³»ç»Ÿè¯¦ç»†è¯´æ˜](#æ’ä»¶ç³»ç»Ÿè¯¦ç»†è¯´æ˜)

---

### ä»»åŠ¡å±‚ï¼ˆTaskerï¼‰

#### Tasker åº•å±‚è§„èŒƒ

æ‰€æœ‰ Tasker åº”å…·å¤‡çš„åŸºç¡€å±æ€§ï¼š

**äº‹ä»¶å¯¹è±¡åŸºç¡€å±æ€§**:
```javascript
{
  self_id: string,           // Bot ID
  tasker: string,           // Tasker ç±»å‹
  tasker_id: string,        // Tasker ID
  tasker_name: string,      // Tasker åç§°
  event_id: string,          // äº‹ä»¶ID
  time: number,              // æ—¶é—´æˆ³
  bot: BotInstance,         // Botå®ä¾‹
  user_id: string|number,    // ç”¨æˆ·ID
  sender: Object,            // å‘é€è€…ä¿¡æ¯
  reply: Function            // å›å¤æ–¹æ³•
}
```

**Tasker ç‰¹å®šå±æ€§**åº”ç”±å¢å¼ºæ’ä»¶å¤„ç†ï¼Œä¸åœ¨åº•å±‚è®¾ç½®ã€‚

#### Tasker åŠ è½½å™¨ (`TaskerLoader`)

**æ–‡ä»¶**: `src/infrastructure/tasker/loader.js`

**èŒè´£**:
- æ‰«æ`core/tasker`ç›®å½•
- åŠ¨æ€åŠ è½½ Tasker æ–‡ä»¶
- Tasker é€šè¿‡`Bot.tasker.push()`æ³¨å†Œ

#### OneBotv11 Tasker

**æ–‡ä»¶**: `core/tasker/OneBotv11.js`

**æ ¸å¿ƒåŠŸèƒ½**:
- WebSocketæ¶ˆæ¯å¤„ç†
- äº‹ä»¶è½¬è¯‘ä¸æ ‡å‡†åŒ–
- å¯¹è±¡å°è£…ï¼ˆfriend/group/memberï¼‰

**å¯¹è±¡è®¿é—®**:
- `Bot[self_id].pickFriend(user_id)`: è·å–å¥½å‹å¯¹è±¡
- `Bot[self_id].pickGroup(group_id)`: è·å–ç¾¤å¯¹è±¡
- `Bot[self_id].pickMember(group_id, user_id)`: è·å–æˆå‘˜å¯¹è±¡

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[ä»»åŠ¡å±‚è¯¦ç»†è¯´æ˜](#ä»»åŠ¡å±‚è¯¦ç»†è¯´æ˜)

---

### äº‹ä»¶ç³»ç»Ÿ

#### äº‹ä»¶å‘½åè§„èŒƒ

**æ ¼å¼**: `{tasker}.{äº‹ä»¶ç±»å‹}.{å­ç±»å‹}`

**ç¤ºä¾‹**:
- `onebot.message.group.normal`: OneBotç¾¤èŠæ™®é€šæ¶ˆæ¯
- `device.message`: è®¾å¤‡æ¶ˆæ¯
- `stdin.message`: æ ‡å‡†è¾“å…¥æ¶ˆæ¯

#### äº‹ä»¶åŒ¹é…è§„åˆ™

1. **å®Œå…¨åŒ¹é…**: `plugin.event === actualEvent`
2. **é€šé…ç¬¦åŒ¹é…**: `onebot.message.*`
3. **é€šç”¨äº‹ä»¶åŒ¹é…**: `message`åŒ¹é…æ‰€æœ‰ Tasker çš„ message äº‹ä»¶
4. **å‰ç¼€åŒ¹é…**: `onebot.*`åŒ¹é…æ‰€æœ‰ OneBot äº‹ä»¶

#### äº‹ä»¶å¤„ç†æµç¨‹

```mermaid
flowchart TB
    A["Tasker è§¦å‘äº‹ä»¶<br/>Bot.em"] --> B["äº‹ä»¶ç›‘å¬å™¨æ¥æ”¶<br/>core/events/*.js"]
    B --> C{äº‹ä»¶å»é‡æ£€æŸ¥}
    C -->|å·²å­˜åœ¨| Z[è·³è¿‡å¤„ç†]
    C -->|æ–°äº‹ä»¶| D["äº‹ä»¶æ ‡å‡†åŒ–<br/>Bot.prepareEvent"]
    D --> E["æ’ä»¶åŠ è½½å™¨å¤„ç†<br/>PluginsLoader.deal"]
    E --> F["æ‰§è¡Œ accept æ–¹æ³•<br/>å¢å¼ºæ’ä»¶æŒ‚è½½å±æ€§"]
    F --> G{åŒ¹é…è§„åˆ™}
    G -->|åŒ¹é…| H["æ‰§è¡Œæ’ä»¶è§„åˆ™"]
    G -->|ä¸åŒ¹é…| I[è·³è¿‡æ’ä»¶]
    H --> J[è¿”å›ç»“æœ]
    I --> J
    
    style A fill:#E6F3FF
    style E fill:#FFE6CC
    style H fill:#90EE90
    style Z fill:#FFB6C1
```

#### äº‹ä»¶ç›‘å¬å™¨å¼€å‘

**æ–‡ä»¶ä½ç½®**: `core/events/mytasker.js`

**åŸºæœ¬ç»“æ„**:
```javascript
import EventListenerBase from '#infrastructure/listener/base.js'

export default class MyTaskerEvent extends EventListenerBase {
  constructor() {
    super('mytasker')
  }

  async init() {
    Bot.on('mytasker.message', (e) => this.handleEvent(e, 'mytasker.message'))
  }

  async handleEvent(e, eventType) {
    // äº‹ä»¶å»é‡
    // è®¾ç½®åŸºç¡€å±æ€§
    // è°ƒç”¨plugins.deal(e)
  }
}
```

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[äº‹ä»¶ç³»ç»Ÿè¯¦ç»†è¯´æ˜](#äº‹ä»¶ç³»ç»Ÿè¯¦ç»†è¯´æ˜)

---

### HTTP/APIå±‚

#### HTTP APIåŸºç±» (`HttpApi`)

**æ–‡ä»¶**: `src/infrastructure/http/http.js`

**ä½¿ç”¨æ–¹å¼**:
```javascript
// core/http/example.js
export default {
  name: 'example-api',
  routes: [
    {
      method: 'GET',
      path: '/api/example/ping',
      handler: async (req, res, Bot) => {
        res.json({ success: true })
      }
    }
  ],
  ws: {
    '/ws/example': async (conn, req, Bot) => {
      // WebSocketå¤„ç†
    }
  }
}
```

#### APIåŠ è½½å™¨ (`ApiLoader`)

**æ–‡ä»¶**: `src/infrastructure/http/loader.js`

**åŠ è½½æµç¨‹**:

```mermaid
flowchart TB
    A[ApiLoader.load] --> B[æ‰«æcore/httpç›®å½•]
    B --> C[åŠ è½½APIæ¨¡å—]
    C --> D[æŒ‰priorityæ’åº]
    D --> E[æ³¨å†ŒHTTPè·¯ç”±]
    E --> F[æ³¨å†ŒWebSocket]
    F --> G[å¯ç”¨çƒ­é‡è½½ç›‘å¬]
    G --> H[APIå¯ç”¨]
    
    style A fill:#E6F3FF
    style D fill:#FFE6CC
    style H fill:#90EE90
```

**åŠŸèƒ½**:
- è‡ªåŠ¨æ‰«æ`core/http`ç›®å½•
- æŒ‰ä¼˜å…ˆçº§æ’åº
- æ³¨å†Œè·¯ç”±å’ŒWebSocket
- æ”¯æŒçƒ­é‡è½½

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[HTTP/APIå±‚è¯¦ç»†è¯´æ˜](#httpapiå±‚è¯¦ç»†è¯´æ˜)

---

### AIå·¥ä½œæµ

#### AIStreamåŸºç±»

**æ–‡ä»¶**: `src/infrastructure/aistream/aistream.js`

**æ ¸å¿ƒåŠŸèƒ½**:
- Chat Completionè°ƒç”¨
- Embeddingç”Ÿæˆä¸æ£€ç´¢
- å‡½æ•°è°ƒç”¨ï¼ˆFunction Callingï¼‰
- ä¸Šä¸‹æ–‡å¢å¼º

**ä½¿ç”¨æ–¹å¼**:
```javascript
// åœ¨æ’ä»¶ä¸­
const stream = this.getStream('chat')
const reply = await stream.process(this.e, question, config)
await this.reply(reply)
```

**å·¥ä½œæµå¤„ç†æµç¨‹**:

```mermaid
flowchart LR
    A[æ’ä»¶è°ƒç”¨process] --> B[æ„å»ºä¸Šä¸‹æ–‡]
    B --> C[è°ƒç”¨LLM]
    C --> D{æ˜¯å¦æœ‰å‡½æ•°è°ƒç”¨}
    D -->|æ˜¯| E[æ‰§è¡Œå‡½æ•°]
    D -->|å¦| F[è¿”å›å“åº”]
    E --> G[å‡½æ•°ç»“æœåˆå¹¶åˆ°ä¸Šä¸‹æ–‡]
    G --> C
    
    style A fill:#E6F3FF
    style C fill:#FFE6CC
    style E fill:#90EE90
    style F fill:#87CEEB
```

**æä¾›å•†æ”¯æŒ**:
- `generic`: OpenAIå…¼å®¹æ¥å£ï¼ˆé»˜è®¤ï¼‰
- `volcengine`: ç«å±±å¼•æ“è±†åŒ…

**ç›¸å…³æ–‡æ¡£**:
- **[å·¥ä½œæµç³»ç»Ÿå®Œæ•´æ–‡æ¡£](å·¥ä½œæµç³»ç»Ÿå®Œæ•´æ–‡æ¡£.md)** - å·¥ä½œæµç³»ç»Ÿå®Œæ•´æ–‡æ¡£ï¼ˆæ¨èï¼‰
- **[å·¥ä½œæµå¼€å‘æ–‡æ¡£](å·¥ä½œæµå¼€å‘æ–‡æ¡£.md)** - å·¥ä½œæµå¼€å‘æ–‡æ¡£ï¼ˆè¡¥å……ï¼‰
- **[å¤æ‚ä»»åŠ¡ç¤ºä¾‹](workflow-complex-task-example.md)** - å¤æ‚ä»»åŠ¡å®Œæ•´è°ƒç”¨æµç¨‹æ¨¡æ‹Ÿ
- **[è®°å¿†ç³»ç»Ÿæ–‡æ¡£](workflow-memory-system.md)** - å·¥ä½œæµè®°å¿†ç³»ç»Ÿè¯¦ç»†æ–‡æ¡£
- **[MCPå®Œæ•´æŒ‡å—](mcp-guide.md)** - MCPå·¥å…·æ³¨å†Œä¸è¿æ¥

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[AIå·¥ä½œæµè¯¦ç»†è¯´æ˜](#aiå·¥ä½œæµè¯¦ç»†è¯´æ˜)

---

### é…ç½®ç³»ç»Ÿ

#### ConfigBaseåŸºç±»

**æ–‡ä»¶**: `src/infrastructure/commonconfig/commonconfig.js`

**åŠŸèƒ½**:
- YAML/JSONè¯»å†™
- è·¯å¾„æ“ä½œï¼ˆget/set/deleteï¼‰
- é…ç½®æ ¡éªŒ
- è‡ªåŠ¨å¤‡ä»½

**ä½¿ç”¨æ–¹å¼**:
```javascript
const config = new ServerConfig()
const data = await config.read()
await config.set('server.port', 8080)
```

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[é…ç½®ç³»ç»Ÿè¯¦ç»†è¯´æ˜](#é…ç½®ç³»ç»Ÿè¯¦ç»†è¯´æ˜)

---

### æ¸²æŸ“ç³»ç»Ÿ

#### RendereråŸºç±»

**æ–‡ä»¶**: `src/infrastructure/renderer/Renderer.js`

**åŠŸèƒ½**:
- HTMLæ¨¡æ¿æ¸²æŸ“
- æ–‡ä»¶ç›‘å¬ä¸è‡ªåŠ¨é‡è½½
- é™æ€èµ„æºè·¯å¾„å¤„ç†

**ä½¿ç”¨æ–¹å¼**:
```javascript
const renderer = Bot.renderer.puppeteer
const htmlPath = await renderer.dealTpl('status', {
  tplFile: 'resources/html/status.html',
  data: { title: 'çŠ¶æ€' }
})
const img = await renderer.renderImage({ htmlPath })
```

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[æ¸²æŸ“ç³»ç»Ÿè¯¦ç»†è¯´æ˜](#æ¸²æŸ“ç³»ç»Ÿè¯¦ç»†è¯´æ˜)

---

### å·¥å…·ç±»

#### BotUtil

**æ–‡ä»¶**: `src/utils/botutil.js`

**ä¸»è¦åŠŸèƒ½**:
- æ—¥å¿—å°è£…ï¼ˆ`makeLog`ï¼‰
- ç¼“å­˜ç®¡ç†ï¼ˆ`cache`ã€`getMap`ï¼‰
- æ–‡ä»¶æ“ä½œï¼ˆ`readFile`ã€`writeFile`ã€`Buffer`ï¼‰
- ç½‘ç»œè¯·æ±‚ï¼ˆ`Buffer`æ”¯æŒHTTPï¼‰
- å¼‚æ­¥æ§åˆ¶ï¼ˆ`retry`ã€`batch`ã€`sleep`ï¼‰
- æ—¶é—´æ ¼å¼åŒ–ï¼ˆ`formatDate`ã€`getTimeDiff`ï¼‰

**è¯¦ç»†æ–‡æ¡£**: è§ä¸‹æ–¹[å·¥å…·ç±»è¯¦ç»†è¯´æ˜](#å·¥å…·ç±»è¯¦ç»†è¯´æ˜)

---

## å¼€å‘æŒ‡å—

> **æ‰©å±•å¼€å‘**ï¼šXRK-AGTæä¾›äº†7å¤§æ‰©å±•ç‚¹ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç»§æ‰¿åŸºç±»å¿«é€Ÿæ‰©å±•åŠŸèƒ½ã€‚è¯¦è§ **[æ¡†æ¶å¯æ‰©å±•æ€§æŒ‡å—](æ¡†æ¶å¯æ‰©å±•æ€§æŒ‡å—.md)** â­ æ¨è

### æ‰©å±•å¼€å‘æµç¨‹

```mermaid
flowchart TB
    A[ç¡®å®šæ‰©å±•ç±»å‹] --> B[é€‰æ‹©å¯¹åº”åŸºç±»]
    B --> C[é˜…è¯»åŸºç±»æ–‡æ¡£]
    C --> D[å®ç°å¿…è¦æ–¹æ³•]
    D --> E[æµ‹è¯•æ‰©å±•åŠŸèƒ½]
    E --> F[æ”¾ç½®åˆ°å¯¹åº”ç›®å½•]
    F --> G[è‡ªåŠ¨åŠ è½½ç”Ÿæ•ˆ]
    
    style A fill:#E6F3FF
    style G fill:#90EE90
```

### ç¼–å†™æ’ä»¶

```javascript
import plugin from '#infrastructure/plugins/plugin.js';

export default class MyPlugin extends plugin {
  constructor() {
    super({
      name: 'æˆ‘çš„æ’ä»¶',
      event: 'message',
      priority: 5000,
      rule: [
        { reg: '^#æµ‹è¯•$', fnc: 'test' }
      ]
    })
  }

  async test(e) {
    await this.reply('æµ‹è¯•æˆåŠŸ')
  }
}
```

**æ‰©å±•ç‰¹æ€§**ï¼š
- âœ… æ”¾ç½®åˆ° `core/plugin/` ç›®å½•å³å¯è‡ªåŠ¨åŠ è½½
- âœ… æ”¯æŒè§„åˆ™åŒ¹é…ã€å®šæ—¶ä»»åŠ¡ã€äº‹ä»¶è®¢é˜…
- âœ… æ”¯æŒå·¥ä½œæµé›†æˆã€ä¸Šä¸‹æ–‡ç®¡ç†

### åˆ›å»ºå·¥ä½œæµ

```javascript
import AIStream from '#infrastructure/aistream/aistream.js';

export default class MyWorkflow extends AIStream {
  constructor() {
    super({
      name: 'my-workflow',
      description: 'æˆ‘çš„å·¥ä½œæµ',
      priority: 100,
      config: { temperature: 0.7 }
    });
  }

  async init() {
    await super.init();
    this.registerAllFunctions();
  }

  buildSystemPrompt(context) {
    return 'ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹...';
  }
}
```

**æ‰©å±•ç‰¹æ€§**ï¼š
- âœ… æ”¾ç½®åˆ° `core/stream/` ç›®å½•å³å¯è‡ªåŠ¨åŠ è½½
- âœ… æ”¯æŒå‡½æ•°æ³¨å†Œã€Embeddingæä¾›å•†
- âœ… æ”¯æŒå·¥ä½œæµåˆå¹¶ã€åŠ¨æ€Prompt

### åˆ›å»º Tasker

```javascript
// core/tasker/MyTasker.js
Bot.tasker.push(new class MyTasker {
  id = 'mytasker'
  name = 'MyTasker'
  path = this.name

  load() {
    Bot.wsf[this.path].push((ws) => {
      ws.on('message', (data) => this.handleMessage(data))
    })
  }

  handleMessage(data) {
    Bot.em('mytasker.message', {
      event_id: `mytasker_${Date.now()}`,
      user_id: data.user_id,
      message: [{ type: 'text', text: data.text }]
    })
  }
})
```

**æ‰©å±•ç‰¹æ€§**ï¼š
- âœ… æ”¾ç½®åˆ° `core/tasker/` ç›®å½•å³å¯è‡ªåŠ¨åŠ è½½
- âœ… æ”¯æŒåè®®è½¬æ¢ã€äº‹ä»¶ç”Ÿæˆ
- âœ… é€šè¿‡ `Bot.em` è§¦å‘æ ‡å‡†åŒ–äº‹ä»¶

### åˆ›å»ºäº‹ä»¶ç›‘å¬å™¨

è§ä¸Šæ–¹[äº‹ä»¶ç›‘å¬å™¨å¼€å‘](#äº‹ä»¶ç›‘å¬å™¨å¼€å‘)éƒ¨åˆ†ã€‚

**æ‰©å±•ç‰¹æ€§**ï¼š
- âœ… æ”¾ç½®åˆ° `core/events/` ç›®å½•å³å¯è‡ªåŠ¨åŠ è½½
- âœ… æ”¯æŒäº‹ä»¶å»é‡ã€é¢„å¤„ç†
- âœ… è‡ªåŠ¨åˆ†å‘åˆ°æ’ä»¶ç³»ç»Ÿ

### åˆ›å»ºHTTP API

è§ä¸Šæ–¹"HTTP/APIå±‚"éƒ¨åˆ†ã€‚

**æ‰©å±•ç‰¹æ€§**ï¼š
- âœ… æ”¾ç½®åˆ° `core/http/` ç›®å½•å³å¯è‡ªåŠ¨åŠ è½½
- âœ… æ”¯æŒREST APIå’ŒWebSocket
- âœ… æ”¯æŒä¸­é—´ä»¶ã€ä¼˜å…ˆçº§æ’åº

---

## è¯¦ç»†æ–‡æ¡£ç´¢å¼•

### Botä¸»ç±»è¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/bot.md`

**å†…å®¹**:
- Botç±»èŒè´£ä¸ç”Ÿå‘½å‘¨æœŸ
- å…³é”®æ–¹æ³•æ¦‚è§ˆ
- ä¸å…¶å®ƒæ ¸å¿ƒå¯¹è±¡çš„å…³ç³»
- å¼€å‘ä¸æ‰©å±•å»ºè®®

### æ’ä»¶ç³»ç»Ÿè¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/plugin-base.md`ã€`docs/plugins-loader.md`

**å†…å®¹**:
- æ’ä»¶åŸºç±»å®Œæ•´API
- acceptæ–¹æ³•è¯¦è§£
- ä¸Šä¸‹æ–‡ç®¡ç†
- æ’ä»¶åŠ è½½å™¨æµç¨‹
- å†·å´ä¸èŠ‚æµæœºåˆ¶

### Tasker ç³»ç»Ÿè¯¦ç»†è¯´æ˜ï¼ˆäº‹ä»¶ç”Ÿæˆå™¨/ä»»åŠ¡å±‚ï¼‰

**æ–‡ä»¶**: `docs/tasker-base-spec.md`ã€`docs/tasker-loader.md`ã€`docs/tasker-onebotv11.md`

**å†…å®¹**:
- Taskeråº•å±‚è§„èŒƒ
- TaskeråŠ è½½å™¨æœºåˆ¶
- OneBotv11 Taskerå®Œæ•´æ–‡æ¡£
- å¯¹è±¡å°è£…ä¸APIè°ƒç”¨

### äº‹ä»¶ç³»ç»Ÿè¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/äº‹ä»¶ç³»ç»Ÿæ ‡å‡†åŒ–æ–‡æ¡£.md`ã€`docs/äº‹ä»¶ç›‘å¬å™¨å¼€å‘æŒ‡å—.md`

**å†…å®¹**:
- äº‹ä»¶å‘½åä¸åŒ¹é…ä¼˜å…ˆçº§ï¼ˆç²¾ç®€ç‰ˆï¼‰
- å­—æ®µè´£ä»»åˆ†ç•Œï¼šå¿…å¡«/è‡ªåŠ¨è¡¥å…¨/å¢å¼ºæ’ä»¶å­—æ®µ
- å¤„ç†æµç¨‹é€Ÿè§ˆ
- æœ€å°äº‹ä»¶ç›‘å¬å™¨æ¨¡ç‰ˆä¸å»é‡è¦ç‚¹

### HTTP/APIå±‚è¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/http-api.md`ã€`docs/api-loader.md`

**å†…å®¹**:
- HttpApiåŸºç±»API
- è·¯ç”±ä¸WebSocketæ³¨å†Œ
- APIåŠ è½½å™¨æœºåˆ¶
- çƒ­é‡è½½æ”¯æŒ

### AIå·¥ä½œæµè¯¦ç»†è¯´æ˜

**ä¸»è¦æ–‡æ¡£**:
- **[`docs/å·¥ä½œæµç³»ç»Ÿå®Œæ•´æ–‡æ¡£.md`](å·¥ä½œæµç³»ç»Ÿå®Œæ•´æ–‡æ¡£.md)** - **å·¥ä½œæµç³»ç»Ÿå®Œæ•´æ–‡æ¡£** â­ æ¨è
  - ç³»ç»Ÿæ¦‚è¿°ä¸æ ¸å¿ƒæ¶æ„
  - å·¥ä½œæµæ‰§è¡Œæµç¨‹ï¼ˆç®€å•ä»»åŠ¡å’Œå¤æ‚ä»»åŠ¡ï¼‰
  - å·¥ä½œæµç®¡ç†å™¨è¯¦è§£
  - å·¥ä½œæµå¼€å‘æŒ‡å—
  - è®°å¿†ç³»ç»Ÿä¸å·¥ä½œæµåˆå¹¶æœºåˆ¶
  - MCPå·¥å…·æ³¨å†Œ
  - æœ€ä½³å®è·µä¸å¸¸è§é—®é¢˜
- **[`docs/å·¥ä½œæµå¼€å‘æ–‡æ¡£.md`](å·¥ä½œæµå¼€å‘æ–‡æ¡£.md)** - å·¥ä½œæµå¼€å‘æ–‡æ¡£ï¼ˆè¡¥å……ï¼‰
- **[`docs/workflow-complex-task-example.md`](workflow-complex-task-example.md)** - å¤æ‚ä»»åŠ¡å®Œæ•´è°ƒç”¨æµç¨‹æ¨¡æ‹Ÿ
- **[`docs/workflow-memory-system.md`](workflow-memory-system.md)** - å·¥ä½œæµè®°å¿†ç³»ç»Ÿè¯¦ç»†æ–‡æ¡£
- **[`docs/mcp-guide.md`](mcp-guide.md)** - MCPå®Œæ•´æŒ‡å—

**åŸºç±»æ–‡æ¡£**:
- **æ–‡ä»¶**: `docs/aistream.md`
- **å†…å®¹**:
  - AIStreamåŸºç±»API
  - Embeddingæä¾›å•†
  - å‡½æ•°è°ƒç”¨æœºåˆ¶
  - ä¸Šä¸‹æ–‡å¢å¼º

### é…ç½®ç³»ç»Ÿè¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/config-base.md`

**å†…å®¹**:
- ConfigBaseåŸºç±»API
- è·¯å¾„æ“ä½œ
- é…ç½®æ ¡éªŒ
- Schemaå®šä¹‰

### æ¸²æŸ“ç³»ç»Ÿè¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/renderer.md`

**å†…å®¹**:
- RendereråŸºç±»API
- æ¨¡æ¿å¤„ç†
- æ–‡ä»¶ç›‘å¬
- è‡ªå®šä¹‰æ¸²æŸ“å™¨å¼€å‘

### å·¥å…·ç±»è¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/botutil.md`

**å†…å®¹**:
- BotUtilå®Œæ•´API
- æ—¥å¿—ä¸å­—ç¬¦ä¸²å·¥å…·
- æ–‡ä»¶ä¸ç½‘ç»œæ“ä½œ
- å¼‚æ­¥æ§åˆ¶æ–¹æ³•

### åº”ç”¨å¼€å‘è¯¦ç»†è¯´æ˜

**æ–‡ä»¶**: `docs/app-dev.md`

**å†…å®¹**:
- å¯åŠ¨æµç¨‹è¯¦è§£
- é…ç½®ä½“ç³»è¯´æ˜
- Webæ§åˆ¶å°å¼€å‘
- å‰åç«¯åä½œ

---

## APIå‚è€ƒ

### Botå…¨å±€å¯¹è±¡

```javascript
Bot = {
  tasker: Array<Tasker>,        // Tasker åˆ—è¡¨
  [self_id]: BotInstance,         // Botå®ä¾‹
  uin: Array<string>,              // QQå·åˆ—è¡¨
  wsf: Object,                     // WebSocketå·¥å‚
  em(name, data): void,            // è§¦å‘äº‹ä»¶
  makeLog(level, msg, id?, err?): void  // æ—¥å¿—
}
```

### äº‹ä»¶å¯¹è±¡ (e)

```javascript
e = {
  // åŸºç¡€å±æ€§
  self_id: string,
  tasker: string,
  event_id: string,
  bot: BotInstance,
  
  // æ¶ˆæ¯ç›¸å…³
  message: Array,
  raw_message: string,
  msg: string,
  
  // ç”¨æˆ·ç›¸å…³
  user_id: string|number,
  sender: Object,
  
  // ç¾¤ç»„ç›¸å…³ï¼ˆç¾¤æ¶ˆæ¯æ—¶ï¼‰
  group_id: string|number,
  
  // OneBotç‰¹å®šï¼ˆç”±OneBotEnhanceræŒ‚è½½ï¼‰
  friend: FriendObject,
  group: GroupObject,
  member: MemberObject,
  isGroup: boolean,
  isPrivate: boolean,
  atBot: boolean,
  
  // å›å¤æ–¹æ³•
  reply(msg, quote?, data?): Promise
}
```

### æ’ä»¶åŸºç±»API

```javascript
class plugin {
  constructor(options)
  async accept(e): boolean|'return'
  reply(msg, quote?, data?): Promise
  getStream(name): AIStream
  setContext(type, isGroup?, time?): void
  getContext(type?, isGroup?): Object
  finish(type, isGroup?): void
}
```

---

## æœ€ä½³å®è·µ

1. **æ’ä»¶å¼€å‘**
   - ä½¿ç”¨æœ‰æ„ä¹‰çš„`name`å’Œ`dsc`
   - åˆç†è®¾ç½®`priority`
   - ä½¿ç”¨`accept`è¿›è¡Œå‰ç½®æ£€æŸ¥
   - åŠæ—¶æ¸…ç†ä¸Šä¸‹æ–‡

2. **Taskerå¼€å‘**
   - åªè®¾ç½®åŸºç¡€å±æ€§
   - Taskerç‰¹å®šå±æ€§ç”±å¢å¼ºæ’ä»¶å¤„ç†
   - ä½¿ç”¨`Bot.em`è§¦å‘äº‹ä»¶
   - ä¿æŒäº‹ä»¶ç»“æ„ç»Ÿä¸€

3. **äº‹ä»¶å¤„ç†**
   - å®ç°äº‹ä»¶å»é‡
   - è®¾ç½®Taskeræ ‡è¯†
   - ä½¿ç”¨try-catchæ•è·é”™è¯¯
   - Taskerç‰¹å®šé€»è¾‘åœ¨å¢å¼ºæ’ä»¶ä¸­å¤„ç†

4. **APIå¼€å‘**
   - ä½¿ç”¨`HttpApi`åŸºç±»
   - ç»Ÿä¸€é”™è¯¯å¤„ç†
   - æ”¯æŒAPI-Keyè®¤è¯
   - æä¾›æ¸…æ™°çš„æ–‡æ¡£

---

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•è®©æ’ä»¶æ”¯æŒå¤šä¸ªTaskerï¼Ÿ**
A: ä½¿ç”¨é€šç”¨äº‹ä»¶åï¼Œå¦‚`event: 'message'`

**Q: acceptæ–¹æ³•ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿ**
A: åœ¨æ’ä»¶è§„åˆ™åŒ¹é…ä¹‹å‰ï¼Œæ‰€æœ‰åŒ¹é…äº‹ä»¶çš„æ’ä»¶éƒ½ä¼šå…ˆæ‰§è¡Œacceptæ–¹æ³•

**Q: å¦‚ä½•é˜»æ­¢å…¶ä»–æ’ä»¶å¤„ç†äº‹ä»¶ï¼Ÿ**
A: åœ¨acceptæ–¹æ³•ä¸­è¿”å›`'return'`

**Q: å¦‚ä½•æ·»åŠ æ–°çš„Taskerï¼Ÿ**
A: 1. åˆ›å»ºTaskeræ–‡ä»¶ 2. åˆ›å»ºäº‹ä»¶ç›‘å¬å™¨ 3. å¯é€‰ï¼šåˆ›å»ºå¢å¼ºæ’ä»¶

---

*æœ¬æ–‡æ¡£æ•´åˆäº†æ‰€æœ‰æ ¸å¿ƒæ–‡æ¡£ï¼Œå¦‚éœ€æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒå¯¹åº”çš„è¯¦ç»†æ–‡æ¡£ã€‚*

