# ============================================
# 系统监控配置（全局配置）
# ============================================
# 全局配置，不随服务器端口变化。控制浏览器/内存/CPU/磁盘/网络/进程等监控与优化策略。
# 位置：data/server_bots/monitor.yaml
# 包含：总开关、间隔、浏览器/内存/CPU 监控、优化策略、报告、磁盘/网络/进程/系统优化。未注明单位均为毫秒。

# ----------------------------------------
# 总开关与间隔
# ----------------------------------------
enabled: true
interval: 120000   # 检查间隔（毫秒）

# ----------------------------------------
# 浏览器进程
# ----------------------------------------
browser:
  enabled: true
  maxInstances: 5
  memoryThreshold: 90   # 内存超此比例（%）触发清理
  reserveNewest: true

# ----------------------------------------
# 内存
# ----------------------------------------
memory:
  enabled: true
  systemThreshold: 85   # 系统内存占比（%）
  nodeThreshold: 85     # Node 堆占比（%）
  autoOptimize: true
  gcInterval: 600000
  leakDetection:
    enabled: true
    threshold: 0.1      # 增长 10% 视为潜在泄漏
    checkInterval: 300000

# ----------------------------------------
# CPU
# ----------------------------------------
cpu:
  enabled: true
  threshold: 90         # 使用率（%）
  checkDuration: 30000

# ----------------------------------------
# 优化策略
# ----------------------------------------
optimize:
  aggressive: false
  autoRestart: false
  restartThreshold: 95  # 超过此比例（%）可触发重启

# ----------------------------------------
# 报告
# ----------------------------------------
report:
  enabled: true
  interval: 3600000

# ----------------------------------------
# 磁盘
# ----------------------------------------
disk:
  enabled: true
  cleanupTemp: true
  cleanupLogs: true
  tempMaxAge: 86400000      # 临时文件最大保留（毫秒）
  logMaxAge: 604800000     # 日志最大保留（毫秒）
  maxLogSize: 104857600    # 单日志文件最大（字节）

# ----------------------------------------
# 网络
# ----------------------------------------
network:
  enabled: true
  maxConnections: 1000
  cleanupIdle: true

# ----------------------------------------
# 进程
# ----------------------------------------
process:
  enabled: true
  priority: normal   # low、normal、high
  nice: 0            # Linux -20～19

# ----------------------------------------
# 系统
# ----------------------------------------
system:
  enabled: true
  clearCache: true
  optimizeCPU: true
