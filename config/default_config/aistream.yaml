# 是否启用工作流系统
enabled: true
  
# 工作流目录路径（相对于项目根目录）
streamDir: "core/stream"
  
# 工作流全局设置
global:
  # 最大执行超时时间（毫秒）
  maxTimeout: 30000
    
  # 是否启用调试日志
  debug: false
    
  # 并发执行限制
  maxConcurrent: 5
  
# 工作流缓存设置
cache:
  # 是否启用缓存
  enabled: true
    
  # 缓存过期时间（秒）
  ttl: 300
    
  # 最大缓存条数
  maxSize: 100

# LLM 调度配置
llm:
  enabled: true
  persona: "你是一名友好、简洁的智能语音助手。"
  displayDelay: 1500
  defaultWorkflow: device
  defaultProfile: balanced
  defaults:
    provider: generic
    baseUrl: "https://api.example.com/v1"
    apiKey: ""
    model: "general-task"
    temperature: 0.8
    maxTokens: 2000
    topP: 0.9
    presencePenalty: 0.6
    frequencyPenalty: 0.6
    timeout: 30000
    path: "/chat/completions"
  profiles:
    balanced:
      label: "通用对话"
      description: "默认档位，兼顾速度和质量"
      baseUrl: "https://api.example.com/v1"
      apiKey: ""
      model: "smart-balanced"
      maxTokens: 4096
      temperature: 0.8
      tags:
        - workflow
        - chat
    fast:
      label: "极速润色"
      description: "短文本润色 / 快速改写"
      baseUrl: "https://fast.api.example.com/v1"
      apiKey: ""
      model: "smart-fast"
      maxTokens: 1024
      temperature: 0.95
      tags:
        - polish
        - fast
    long:
      label: "长文本专家"
      description: "总结、分析等长上下文任务"
      baseUrl: "https://api.example.com/v1"
      apiKey: ""
      model: "smart-long"
      maxTokens: 8000
      temperature: 0.6
      tags:
        - analysis
        - long
    device:
      label: "设备友好"
      description: "面向设备工作流，响应简洁"
      baseUrl: "https://edge.api.example.com/v1"
      apiKey: ""
      model: "smart-device"
      maxTokens: 1024
      temperature: 0.7
      tags:
        - device
        - display
    creative:
      label: "灵感工坊"
      description: "故事、脑洞、营销灵感"
      baseUrl: "https://api.example.com/v1"
      apiKey: ""
      model: "smart-creative"
      maxTokens: 4096
      temperature: 0.95
      tags:
        - creative
        - story
  workflows:
    device:
      label: "设备工作流"
      description: "面向 XRK 设备的输出"
      profile: device
      persona: "你是一个语音设备助手，输出需简洁，可加表情指令。"
      overrides:
        maxTokens: 1024
        temperature: 0.7
    assistant:
      label: "日常助手"
      description: "默认通用问答体验"
      profile: balanced
      persona: "你是一名专业又有温度的中文 AI 助手。"
    polish:
      label: "润色助手"
      description: "高效率润色/改写"
      profile: fast
      persona: "你擅长对中文进行专业润色，保持原意，语气自然。"
      overrides:
        temperature: 0.9
        maxTokens: 2048
    analysis:
      label: "长文本分析"
      description: "总结报告/日志分析"
      profile: long
      persona: "你擅长梳理结构、拆解要点，并以条理化格式输出。"
      overrides:
        maxTokens: 6000
        temperature: 0.65
    creative:
      label: "灵感创作"
      description: "故事、脚本、营销灵感"
      profile: creative
      persona: "你是一位富有想象力的创意写作者。"
      overrides:
        temperature: 0.95
        maxTokens: 4096
    chat:
      label: "聊天工作流"
      description: "OneBot/群聊专用"
      profile: balanced
      uiHidden: true
      overrides:
        temperature: 0.8
        maxTokens: 4096

# Embedding 配置
embedding:
  enabled: true
  defaultProfile: lightweight
  defaults:
    provider: lightweight
    maxContexts: 5
    similarityThreshold: 0.6
    cacheExpiry: 86400
    cachePath: "./data/models"
  profiles:
    lightweight:
      provider: lightweight
    onnx:
      provider: onnx
      onnxModel: "Xenova/all-MiniLM-L6-v2"
      onnxQuantized: true
    hf:
      provider: hf
      hfModel: "sentence-transformers/all-MiniLM-L6-v2"
      hfToken: ""
    fasttext:
      provider: fasttext
      fasttextModel: "cc.zh.300.bin"
    api:
      provider: api
      apiUrl: ""
      apiKey: ""
      apiModel: "text-embedding-3-small"

# 绘图模型占位配置（便于后续扩展）
drawing:
  defaultModel: sketch
  models:
    sketch:
      provider: generic
      baseUrl: "https://api.example.com/draw"
      apiKey: ""
      model: "dalle-mini"

# TTS 配置
tts:
  enabled: true
  defaultProvider: volcengine
  providers:
    volcengine:
      wsUrl: "wss://openspeech.bytedance.com/api/v3/tts/bidirection"
      appKey: "YOUR_APP_KEY"
      accessKey: "YOUR_ACCESS_KEY"
      resourceId: "seed-tts-2.0"
      voiceType: "zh_female_vv_uranus_bigtts"
      encoding: "pcm"
      sampleRate: 16000
      speechRate: 5
      loudnessRate: 0
      emotion: "happy"
      chunkMs: 128
      chunkDelayMs: 5

# ASR 配置
asr:
  enabled: true
  defaultProvider: volcengine
  providers:
    volcengine:
      wsUrl: "wss://openspeech.bytedance.com/api/v3/sauc/bigmodel_async"
      appKey: "YOUR_APP_KEY"
      accessKey: "YOUR_ACCESS_KEY"
      resourceId: "volc.bigasr.sauc.duration"
      enableItn: true
      enablePunc: true
      enableDdc: false
      showUtterances: true
      resultType: "full"
      enableAccelerateText: true
      accelerateScore: 15
      persistentWs: true
      idleCloseMs: 6000
      endWindowSize: 350
      forceToSpeechTime: 500
      maxAudioBufferSize: 30
      asrFinalTextWaitMs: 1200

# 设备运行参数
device:
  heartbeatInterval: 30
  heartbeatTimeout: 180
  commandTimeout: 10000
  maxDevices: 100
  maxLogsPerDevice: 100
  messageQueueSize: 100
  wsPingIntervalMs: 30000
  wsPongTimeoutMs: 10000
  wsReconnectDelayMs: 2000
  wsMaxReconnectAttempts: 5
  enableDetailedLogs: true
  enablePerformanceLogs: true
  audioSaveDir: "./data/wav"

# 表情映射
emotions:
  keywords:
    开心: happy
    伤心: sad
    生气: angry
    惊讶: surprise
    爱: love
    酷: cool
    睡觉: sleep
    思考: think
    眨眼: wink
    大笑: laugh
  supported:
    - happy
    - sad
    - angry
    - surprise
    - love
    - cool
    - sleep
    - think
    - wink
    - laugh