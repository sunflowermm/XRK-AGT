<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="XRK-AGT - æ–°ä¸€ä»£é«˜æ€§èƒ½å‘æ—¥è‘µæœºå™¨äººæ¡†æ¶">
    <title>XRK-AGT | æ™ºèƒ½æœºå™¨äººæ¡†æ¶</title>
    <style>
        :root {
            --bg-dark: #050508;
            --bg-card: rgba(20, 20, 25, 0.6);
            --primary: #FFD700; /* å‘æ—¥è‘µé‡‘ */
            --primary-glow: rgba(255, 215, 0, 0.3);
            --accent: #6366f1; /* ç§‘æŠ€ç´« */
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.08);
            --glass: blur(20px);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* åŠ¨æ€èƒŒæ™¯ */
        .ambient-light {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            z-index: -1;
            background: 
                radial-gradient(circle at 15% 50%, rgba(99, 102, 241, 0.15), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(255, 215, 0, 0.1), transparent 25%);
            filter: blur(60px);
        }

        /* å¯¼èˆªæ  */
        nav {
            position: fixed;
            top: 0; width: 100%;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            background: rgba(5, 5, 8, 0.8);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: -1px;
        }
        
        .logo span { background: linear-gradient(to right, #fff, var(--primary)); -webkit-background-clip: text; color: transparent; }

        .nav-links { display: flex; gap: 30px; list-style: none; }
        .nav-links a { text-decoration: none; color: var(--text-muted); font-size: 0.95rem; transition: 0.3s; }
        .nav-links a:hover { color: var(--primary); }

        /* æ ¸å¿ƒåŒºåŸŸ Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 20px;
            position: relative;
        }

        .hero h1 {
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #fff 0%, var(--text-muted) 100%);
            -webkit-background-clip: text;
            color: transparent;
        }

        .hero h1 .highlight {
            background: linear-gradient(135deg, var(--primary) 0%, #FFA500 100%);
            -webkit-background-clip: text;
            color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-muted);
            max-width: 600px;
            margin-bottom: 40px;
        }

        .btn-group { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
        
        .btn {
            padding: 14px 32px;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid transparent;
        }

        .btn-primary {
            background: var(--primary);
            color: #000;
            box-shadow: 0 4px 20px var(--primary-glow);
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--primary-glow); }

        .btn-secondary {
            background: rgba(255,255,255,0.05);
            color: white;
            border: 1px solid var(--border);
        }
        .btn-secondary:hover { background: rgba(255,255,255,0.1); border-color: white; }

        /* æ¸¸æˆåŒºåŸŸä¼˜åŒ– */
        .game-section {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .game-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid var(--border);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
        }

        #videoCanvas { opacity: 0.3; object-fit: cover; transform: scaleX(-1); }
        #gameCanvas { z-index: 2; }

        .game-ui {
            position: absolute;
            top: 20px; left: 20px; right: 20px;
            display: flex;
            justify-content: space-between;
            z-index: 10;
            pointer-events: none;
        }

        .stat-card {
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
        }
        .stat-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--primary); font-family: monospace; }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .guide-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 20;
            pointer-events: none;
            transition: opacity 0.5s;
        }
        .guide-text {
            font-size: 2rem;
            font-weight: 800;
            text-shadow: 0 4px 20px rgba(0,0,0,0.8);
            margin-bottom: 10px;
        }
        .guide-sub { color: rgba(255,255,255,0.8); }
        .hidden { opacity: 0; }

        /* ç‰¹æ€§å¡ç‰‡ Grid */
        .grid-section { padding: 4rem 2rem; max-width: 1200px; margin: 0 auto; }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 3rem; }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 30px;
            border-radius: 20px;
            transition: 0.3s;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }
        .feature-card h3 { margin-bottom: 10px; }
        .feature-card p { color: var(--text-muted); font-size: 0.9rem; }

        footer {
            border-top: 1px solid var(--border);
            padding: 3rem 2rem;
            text-align: center;
            color: var(--text-muted);
            margin-top: 4rem;
        }

        /* éšè—çš„è¾…åŠ© Canvas */
        #motionCanvas { display: none; }

        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero h1 { font-size: 2.5rem; }
            .game-wrapper { aspect-ratio: 3/4; }
        }
    </style>
</head>
<body>

    <div class="ambient-light"></div>

    <nav>
        <div class="logo">
            <span>ğŸŒ»</span> XRK-AGT
        </div>
        <ul class="nav-links">
            <li><a href="#home">é¦–é¡µ</a></li>
            <li><a href="#game">ä½“æ„Ÿè¯•ç©</a></li>
            <li><a href="#features">ç‰¹æ€§</a></li>
            <li><a href="https://gitcode.com/Xrkseek/XRK-AGT" target="_blank">GitCode</a></li>
        </ul>
    </nav>

    <section id="home" class="hero">
        <h1>å®šä¹‰æ–°ä¸€ä»£<br><span class="highlight">æœºå™¨äººäº¤äº’ä½“éªŒ</span></h1>
        <p>åŸºäº Yunzai-Bot çš„é«˜æ€§èƒ½å‘æ—¥è‘µæ¡†æ¶ã€‚æ›´æ‡‚ä½ çš„ AIï¼Œæ›´ä¸æ»‘çš„ä½“éªŒã€‚<br>å¼€æºã€å…è´¹ã€æé€Ÿå“åº”ã€‚</p>
        <div class="btn-group">
            <a href="#game" class="btn btn-primary" onclick="initCamera()">ğŸ® ç«‹å³ä½“éªŒä½“æ„Ÿ</a>
            <a href="https://github.com/sunflowermm/XRK-AGT" target="_blank" class="btn btn-secondary">â­ GitHub Star</a>
        </div>
    </section>

    <section id="game" class="game-section">
        <h2 class="section-title">é«˜å¸§ç‡ä½“æ„Ÿæ¼”ç¤º</h2>
        <p style="text-align: center; margin-bottom: 20px; color: var(--text-muted);">
            <small>âš ï¸ éœ€è¦æ‘„åƒå¤´æƒé™ | æ¨èåœ¨å…‰çº¿å……è¶³çš„ç¯å¢ƒä¸‹ä½“éªŒ | ç®—æ³•å·²ä¼˜åŒ–</small>
        </p>
        
        <div class="game-wrapper">
            <canvas id="videoCanvas"></canvas>
            <canvas id="gameCanvas"></canvas>
            <canvas id="motionCanvas"></canvas>
            <video id="hiddenVideo" style="display:none;" playsinline autoplay muted></video>

            <div class="game-ui">
                <div class="stat-card">
                    <span class="stat-label">åˆ†æ•°</span>
                    <span class="stat-value" id="scoreEl">0</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">å¸§ç‡ (FPS)</span>
                    <span class="stat-value" id="fpsEl">0</span>
                </div>
            </div>

            <div id="guideOverlay" class="guide-overlay">
                <div class="guide-text">ç‚¹å‡»ä¸‹æ–¹â€œå¯åŠ¨â€</div>
                <div class="guide-sub">æŒ¥æ‰‹æŠ“å–å‘æ—¥è‘µï¼Œæ”¾å…¥å³ä¸‹è§’</div>
            </div>
        </div>

        <div class="game-controls">
            <button class="btn btn-primary" onclick="startGame()" id="startBtn">â–¶ï¸ å¯åŠ¨å¼•æ“</button>
            <button class="btn btn-secondary" onclick="stopGame()">â¸ï¸ åœæ­¢</button>
            <button class="btn btn-secondary" onclick="toggleDebug()">ğŸ‘ï¸ åˆ‡æ¢è§†é¢‘èƒŒæ™¯</button>
        </div>
    </section>

    <section id="features" class="grid-section">
        <h2 class="section-title">æ ¸å¿ƒä¼˜åŠ¿</h2>
        <div class="card-grid">
            <div class="feature-card">
                <span class="icon">ğŸš€</span>
                <h3>æé€Ÿå“åº”</h3>
                <p>åº•å±‚é€»è¾‘æ·±åº¦ä¼˜åŒ–ï¼Œæ¶ˆæ¯å¤„ç†å»¶è¿Ÿé™ä½ 40%ï¼Œä¸ºæ‚¨æä¾›ä¸èˆ¬é¡ºæ»‘çš„å¯¹è¯ä½“éªŒã€‚</p>
            </div>
            <div class="feature-card">
                <span class="icon">ğŸ§©</span>
                <h3>æ¨¡å—åŒ–è®¾è®¡</h3>
                <p>åŠŸèƒ½è§£è€¦ï¼Œæ’ä»¶çƒ­æ’æ‹”ã€‚æƒ³è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œè£…ä»€ä¹ˆæ’ä»¶ï¼Œæ‹’ç»è‡ƒè‚¿ã€‚</p>
            </div>
            <div class="feature-card">
                <span class="icon">ğŸ¨</span>
                <h3>é«˜åº¦å¯å®šåˆ¶</h3>
                <p>ä»æ¬¢è¿è¯­åˆ°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸€åˆ‡çš†å¯é…ç½®ã€‚æ‰“é€ å±äºä½ ç‹¬ä¸€æ— äºŒçš„æœºå™¨äººã€‚</p>
            </div>
        </div>
    </section>

    <footer>
        <p>Â© 2024 XRK-AGT Framework. Designed for Innovators.</p>
        <p style="margin-top: 10px; font-size: 0.8rem;">Powered by Web Assembly & Canvas API</p>
    </footer>

    <script>
        /**
         * æ¸¸æˆå¼•æ“æ ¸å¿ƒ
         * ä¼˜åŒ–æ€è·¯ï¼š
         * 1. é™é‡‡æ ·ï¼šä½¿ç”¨å°åˆ†è¾¨ç‡ Canvas è¿›è¡Œåƒç´ æ¯”å¯¹ (Motion Canvas)
         * 2. å·®åˆ†ç®—æ³•ï¼šå¯¹æ¯”å‰åå¸§åƒç´ äº®åº¦
         * 3. è´¨å¿ƒè®¡ç®—ï¼šè®¡ç®—è¿åŠ¨åŒºåŸŸçš„ä¸­å¿ƒç‚¹ï¼Œè€Œéæœ€å¤§å€¼ç‚¹ï¼Œæé«˜ç²¾åº¦
         * 4. LERP å¹³æ»‘ï¼šå¯¹åæ ‡è¿›è¡Œçº¿æ€§æ’å€¼ï¼Œæ¶ˆé™¤æŠ–åŠ¨
         */

        const config = {
            sensitivity: 25, // è¿åŠ¨æ£€æµ‹é˜ˆå€¼ (0-255)
            samplingRatio: 16, // é™é‡‡æ ·å€ç‡ (è¶Šå¤§æ€§èƒ½è¶Šå¥½ä½†ç²¾åº¦è¶Šä½)
            lerpFactor: 0.15, // å¹³æ»‘ç³»æ•° (è¶Šå°è¶Šå¹³æ»‘ä½†å»¶è¿Ÿè¶Šé«˜)
            itemCount: 8 // å‘æ—¥è‘µæ•°é‡
        };

        // DOM å…ƒç´ 
        const video = document.getElementById('hiddenVideo');
        const motionCanvas = document.getElementById('motionCanvas');
        const motionCtx = motionCanvas.getContext('2d', { willReadFrequently: true });
        const gameCanvas = document.getElementById('gameCanvas');
        const gameCtx = gameCanvas.getContext('2d');
        const videoCanvas = document.getElementById('videoCanvas');
        const videoCtx = videoCanvas.getContext('2d');
        const scoreEl = document.getElementById('scoreEl');
        const fpsEl = document.getElementById('fpsEl');
        const guideOverlay = document.getElementById('guideOverlay');

        // æ¸¸æˆçŠ¶æ€
        let isRunning = false;
        let showVideo = true;
        let score = 0;
        let lastTime = 0;
        let prevFrameData = null;
        
        // ç‰©ç†çŠ¶æ€
        let handPos = { x: 0, y: 0 };
        let targetPos = { x: 0, y: 0 };
        let isMoving = false;
        let particles = [];
        let sunflowers = [];
        let basket = { x: 0, y: 0, w: 120, h: 120 };

        // å°ºå¯¸ç®¡ç†
        let width, height, motionW, motionH;

        function resize() {
            const rect = gameCanvas.parentElement.getBoundingClientRect();
            width = rect.width;
            height = rect.height;
            
            gameCanvas.width = width;
            gameCanvas.height = height;
            videoCanvas.width = width;
            videoCanvas.height = height;

            // é™é‡‡æ ·å°ºå¯¸ (æ¯”å¦‚ 1280px -> 80px)
            motionW = Math.floor(width / config.samplingRatio);
            motionH = Math.floor(height / config.samplingRatio);
            motionCanvas.width = motionW;
            motionCanvas.height = motionH;

            // æ›´æ–°ç®©ç­ä½ç½®ï¼ˆå³ä¸‹è§’ï¼‰
            basket.x = width - basket.w - 20;
            basket.y = height - basket.h - 20;
        }

        window.addEventListener('resize', resize);

        // å‘æ—¥è‘µç±»
        class Sunflower {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * (width - 100) + 50;
                this.y = Math.random() * (height / 2) + 50;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.size = 40;
                this.grabbed = false;
                this.scale = 0; // å‡ºç°åŠ¨ç”»
            }

            update() {
                // å‡ºç°åŠ¨ç”»
                if (this.scale < 1) this.scale += 0.05;

                if (this.grabbed) {
                    // è·Ÿéšæ‰‹éƒ¨ (å¸¦ä¸€ç‚¹å¼¹æ€§)
                    this.x += (handPos.x - this.x) * 0.2;
                    this.y += (handPos.y - this.y) * 0.2;
                    
                    // æ£€æµ‹æ”¾å…¥ç®©ç­
                    if (this.x > basket.x && this.y > basket.y) {
                        score += 10;
                        scoreEl.textContent = score;
                        createParticles(this.x, this.y, 15, '#FFD700'); // é‡‘è‰²ç²’å­
                        this.reset();
                        this.scale = 0;
                        this.grabbed = false;
                    }
                } else {
                    // æ¼‚æµ®ç‰©ç†
                    this.x += this.vx;
                    this.y += this.vy;

                    // è¾¹ç•Œåå¼¹
                    if (this.x < 0 || this.x > width) this.vx *= -1;
                    if (this.y < 0 || this.y > height) this.vy *= -1;

                    // æŠ“å–åˆ¤å®š (æ‰‹éƒ¨æ¥è¿‘)
                    const dx = handPos.x - this.x;
                    const dy = handPos.y - this.y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    
                    if (isMoving && dist < 60) {
                        this.grabbed = true;
                    }
                }
            }

            draw(ctx) {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.scale(this.scale, this.scale);
                ctx.font = "40px Arial";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.shadowBlur = this.grabbed ? 20 : 0;
                ctx.shadowColor = "#FFD700";
                ctx.fillText("ğŸŒ»", 0, 0);
                ctx.restore();
            }
        }

        // ç²’å­ç³»ç»Ÿ
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.vx = (Math.random() - 0.5) * 10;
                this.vy = (Math.random() - 0.5) * 10;
                this.life = 1;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life -= 0.05;
            }
            draw(ctx) {
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        function createParticles(x, y, count, color) {
            for(let i=0; i<count; i++) {
                particles.push(new Particle(x, y, color));
            }
        }

        // æ ¸å¿ƒç®—æ³•ï¼šè¿åŠ¨æ£€æµ‹
        function detectMotion() {
            if (video.readyState !== 4) return;

            // 1. ç»˜åˆ¶ç¼©ç•¥å›¾ (é•œåƒç»˜åˆ¶)
            motionCtx.save();
            motionCtx.scale(-1, 1);
            motionCtx.drawImage(video, -motionW, 0, motionW, motionH);
            motionCtx.restore();

            // 2. è·å–åƒç´ æ•°æ®
            const frame = motionCtx.getImageData(0, 0, motionW, motionH);
            const data = frame.data;
            const len = data.length;

            if (!prevFrameData) {
                prevFrameData = new Uint8Array(len);
                for(let i=0; i<len; i++) prevFrameData[i] = data[i];
                return;
            }

            let sumX = 0, sumY = 0, count = 0;

            // 3. åƒç´ æ¯”å¯¹ (æ­¥é•¿ä¸º4ï¼Œåªå–RGBçš„Gé€šé“ï¼Œæ€§èƒ½ä¼˜åŒ–)
            for (let i = 0; i < len; i += 4) {
                // ç®€å•çš„äº®åº¦å·®åˆ†
                const diff = Math.abs(data[i+1] - prevFrameData[i+1]); 

                if (diff > config.sensitivity) {
                    // åæ ‡è½¬æ¢ï¼ši/4 æ˜¯åƒç´ ç´¢å¼•
                    const pIndex = i / 4;
                    const x = pIndex % motionW;
                    const y = Math.floor(pIndex / motionW);

                    sumX += x;
                    sumY += y;
                    count++;
                }
                
                // æ›´æ–°ä¸Šä¸€å¸§æ•°æ®
                prevFrameData[i] = data[i];     // R
                prevFrameData[i+1] = data[i+1]; // G
                prevFrameData[i+2] = data[i+2]; // B
            }

            // 4. è®¡ç®—è´¨å¿ƒ
            isMoving = count > 5; // å™ªç‚¹è¿‡æ»¤
            if (isMoving) {
                // è®¡ç®—å¹³å‡ä½ç½®å¹¶æ˜ å°„å›å±å¹•åæ ‡
                targetPos.x = (sumX / count) * config.samplingRatio;
                targetPos.y = (sumY / count) * config.samplingRatio;
            }
        }

        async function startGame() {
            if (isRunning) return;
            
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: "user",
                        width: { ideal: 1280 },
                        height: { ideal: 720 } 
                    } 
                });
                video.srcObject = stream;
                
                // ç­‰å¾…è§†é¢‘åŠ è½½
                await new Promise(r => video.onloadedmetadata = r);
                
                resize();
                isRunning = true;
                document.getElementById('startBtn').innerText = "ğŸš€ è¿è¡Œä¸­";
                guideOverlay.innerHTML = "<div class='guide-text'>æ¸¸æˆå¼€å§‹!</div>";
                setTimeout(() => guideOverlay.classList.add('hidden'), 2000);

                // åˆå§‹åŒ–ç‰©ä½“
                sunflowers = Array(config.itemCount).fill(0).map(() => new Sunflower());
                
                loop();

            } catch (e) {
                alert("æ— æ³•è®¿é—®æ‘„åƒå¤´: " + e.message);
            }
        }

        function stopGame() {
            isRunning = false;
            if(video.srcObject) {
                video.srcObject.getTracks().forEach(t => t.stop());
            }
            document.getElementById('startBtn').innerText = "â–¶ï¸ é‡æ–°å¼€å§‹";
        }

        function toggleDebug() {
            showVideo = !showVideo;
            videoCanvas.style.opacity = showVideo ? 0.3 : 0;
        }

        // æ¸¸æˆä¸»å¾ªç¯
        function loop(timestamp) {
            if (!isRunning) return;

            // FPS è®¡ç®—
            const dt = timestamp - lastTime;
            lastTime = timestamp;
            fpsEl.textContent = Math.round(1000 / dt);

            // 1. é€»è¾‘æ›´æ–°
            detectMotion();

            // å¹³æ»‘æ’å€¼ (Lerp)
            handPos.x += (targetPos.x - handPos.x) * config.lerpFactor;
            handPos.y += (targetPos.y - handPos.y) * config.lerpFactor;

            // 2. æ¸²æŸ“èƒŒæ™¯è§†é¢‘ (å¦‚æœå¼€å¯)
            videoCtx.clearRect(0,0,width,height);
            if(showVideo) {
                videoCtx.save();
                videoCtx.scale(-1, 1);
                videoCtx.drawImage(video, -width, 0, width, height);
                videoCtx.restore();
            }

            // 3. æ¸²æŸ“æ¸¸æˆå±‚
            gameCtx.clearRect(0, 0, width, height);

            // ç»˜åˆ¶ç®©ç­
            gameCtx.fillStyle = "rgba(100, 100, 255, 0.2)";
            gameCtx.strokeStyle = "#6366f1";
            gameCtx.lineWidth = 3;
            gameCtx.beginPath();
            gameCtx.roundRect(basket.x, basket.y, basket.w, basket.h, 15);
            gameCtx.fill();
            gameCtx.stroke();
            gameCtx.font = "40px Arial";
            gameCtx.textAlign = "center";
            gameCtx.fillStyle = "#fff";
            gameCtx.fillText("ğŸ§º", basket.x + basket.w/2, basket.y + basket.h/2);

            // ç»˜åˆ¶å‘æ—¥è‘µ
            sunflowers.forEach(s => {
                s.update();
                s.draw(gameCtx);
            });

            // ç»˜åˆ¶ç²’å­
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].draw(gameCtx);
                if (particles[i].life <= 0) particles.splice(i, 1);
            }

            // ç»˜åˆ¶æ‰‹éƒ¨å…‰æ ‡
            if (isMoving) {
                gameCtx.beginPath();
                gameCtx.arc(handPos.x, handPos.y, 20, 0, Math.PI * 2);
                gameCtx.fillStyle = "rgba(255, 215, 0, 0.5)"; // æ ¸å¿ƒ
                gameCtx.fill();
                gameCtx.strokeStyle = "#fff";
                gameCtx.lineWidth = 2;
                gameCtx.stroke();
                
                // å…‰æ™•
                gameCtx.beginPath();
                gameCtx.arc(handPos.x, handPos.y, 35, 0, Math.PI * 2);
                gameCtx.fillStyle = "rgba(255, 215, 0, 0.2)";
                gameCtx.fill();
            }

            requestAnimationFrame(loop);
        }

        // åˆå§‹åŒ–å°ºå¯¸
        resize();
    </script>
</body>
</html>